<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="./assets/css/style.css">
    <title>E-Library | Book</title>
</head>
<body>


    <header></header>

    <section id="book"></section>


    <footer></footer>

<script type="module">

        import {initHeader} from "./components/NavbarAndFooter/Header.js";
        import {initFooter} from "./components/NavbarAndFooter/Footer.js";
        import {getBook} from "./components/Books/Book.js";

        const paramString = window.location.href.split('?')[1];
        const searchParams = new URLSearchParams(paramString);

        //console.log(searchParams)

        initHeader(document.querySelector("header"));

        if(searchParams.has('id')){
            getBook(searchParams.get('id')).then(book => {
                document.querySelector('#book').innerHTML = `
                <div class="container mt-5">
                    <h1 class="book-title text-center">${book.title}</h1>
                    <div class="col">
                        <div class="col-md-12 text-center">
                            <img src=${book.formats["image/jpeg"]} width=500 alt="Fotografia e Librit" class="img-fluid"> <i class="bi bi-heart"></i>
                        </div>
                        <div class="col-md-12 text-center">
                            <small class="text-center"><b>Author</b>: ${book.authors[0].name} ${book.authors[0].birth_year}-${book.authors[0].death_year}</small>
                    
                            <p class="mt-5">${book.subjects}</p>
                        
                        </div>
                    </div>
                </div>
                `
            })
        }else{
            window.location.href = 'http://127.0.0.1:5500/';
        }

        initFooter(document.querySelector("footer"));
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>